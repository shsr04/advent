function main() {
  printf("Result: %d\n", run() or (e) => {
    printf("Error! %s\n", e.message)
    return 1
  })
}

function run(): number | error {
  let grid: matrix(number) with dim(2), matrixSize([3, 3]) = []
  const grid1 = grid.insert(10, [1, 1])
  const grid2 = grid1.insert(5, [1, 2]).insert(7, [2, 1])

  let sum = 0
  for const cell in grid2.members() {
    const coords = cell.index()
    if coords.size() != 2 {
      return error("member index arity mismatch")
    }
    sum += cell
  }

  const near = grid2.neighbours([1, 1])
  return sum + near.size()
}
