@Test({
   "exit" : 0,
   "stdin" : "1-3,5-4",
   "stdout" : "Result: 6\n"
})
function main() {
  const result = solve()?
  log("Result: ${result}")
}

function solve(): number | error {
  const ranges = split(STDIN, ",")?
  let total = 0

  for const range in ranges {
    const parts = split(range, "-")?
    const bounds = parts.map(parseNumber)?
    if bounds.size() == 2 {
      const [start, end] = bounds
      for const x in seq(start, end) {
        total += x
      }
    } else {
      return error("Invalid range expression: ${range}")
    }
  }

  return total
}
